<div class="app-shell">
  <!-- Header -->
  <mat-toolbar color="primary" class="app-header mat-elevation-z2">
    <a routerLink="/" class="branding">
      <span class="title">Boardgame Connect</span>
    </a>

    <span class="spacer"></span>

    @if (auth.isAuthenticated() && auth.currentUser(); as user){
    <div class="user-profile" [matMenuTriggerFor]="userMenu">
      <span class="user-name">{{ user.username }}</span>

      <div class="avatar" aria-hidden="true">
        {{ user.username.slice(0, 2).toUpperCase() }}
      </div>
    </div>

    <mat-menu #userMenu="matMenu">
      <button mat-menu-item disabled>
        <mat-icon>person</mat-icon>
        <span>Profile</span>
      </button>
      <button mat-menu-item (click)="auth.logout()">
        <mat-icon>logout</mat-icon>
        <span>Log out</span>
      </button>
    </mat-menu>
    } @else {
    <div class="guest-actions">
      <a mat-button routerLink="/login" routerLinkActive="hidden"> Login </a>
      <a mat-raised-button color="accent" routerLink="/register" routerLinkActive="hidden">
        Register
      </a>
    </div>
    }
  </mat-toolbar>

  <main class="app-content">
    <router-outlet />
  </main>

  <footer class="app-footer">&copy; 2025 Boardgame Connect. All rights reserved.</footer>
</div>
