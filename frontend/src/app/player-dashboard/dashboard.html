<div class="container mx-auto p-4 max-w-6xl">
  <header class="mb-8 border-b border-gray-200 pb-4">
    <h1 class="text-3xl font-light text-gray-800">Available Games</h1>
    <p class="text-gray-500 mt-1">Join a game or reserve your spot.</p>
  </header>

  <div class="filters-card mat-elevation-z1 mb-6">
    <div class="filters-grid">
      <mat-form-field appearance="outline" class="filter-item">
        <mat-label>Game Name</mat-label>
        <input matInput [formControl]="nameFilter" placeholder="e.g. Root" />
        <mat-icon matSuffix class="text-gray-400">videogame_asset</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="filter-item">
        <mat-label>Association</mat-label>
        <input matInput [formControl]="assocFilter" placeholder="e.g. Gilda" />
        <mat-icon matSuffix class="text-gray-400">store</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="filter-item status-filter">
        <mat-label>Status</mat-label>
        <mat-select [formControl]="statusFilter">
          <mat-option value="">All</mat-option>
          <mat-option value="open">Open</mat-option>
          <mat-option value="closed">Closed</mat-option>
        </mat-select>
      </mat-form-field>

      <div class="filter-actions flex gap-2">
        <!-- CLEAR BUTTON -->
        <button
          mat-stroked-button
          color="warn"
          (click)="clearFilters()"
          aria-label="Clear all filters"
          [disabled]="!nameFilter.value && !assocFilter.value && !statusFilter.value"
        >
          <mat-icon>filter_alt_off</mat-icon>
        </button>

        <!-- REFRESH BUTTON -->
        <button mat-stroked-button color="primary" (click)="loadData()" aria-label="Refresh list">
          <mat-icon>refresh</mat-icon>
        </button>
      </div>
    </div>
  </div>

  @if (isLoading()) {
  <div class="flex justify-center py-12" role="status">
    <mat-spinner diameter="40"></mat-spinner>
    <span class="sr-only">Loading reservations...</span>
  </div>
  } @else if (hasError()) {
  <div
    class="flex flex-col items-center justify-center py-12 text-center animate-fade-in"
    role="alert"
  >
    <div class="bg-red-50 p-6 rounded-full mb-6 text-red-500">
      <mat-icon class="text-6xl !w-16 !h-16">dns</mat-icon>
    </div>

    <h2 class="text-2xl font-bold text-gray-800 mb-2">Connection Failed</h2>
    <p class="text-gray-600 max-w-md mb-8">{{ error() }}</p>

    <button mat-flat-button color="primary" (click)="loadData()">
      <mat-icon>refresh</mat-icon> TRY AGAIN
    </button>
  </div>
  } @else {
  <div class="results-grid">
    @for (item of reservations(); track item.id) {
    <app-reservation [reservation]="item" />
    } @empty {
    <div class="col-span-full flex flex-col items-center py-12 text-gray-500">
      <mat-icon class="text-4xl mb-2">event_busy</mat-icon>
      <p>No tables found matching your filters.</p>
    </div>
    }
  </div>
  }
</div>
