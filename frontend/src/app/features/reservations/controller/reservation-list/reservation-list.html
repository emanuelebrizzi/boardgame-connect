<div class="container mx-auto p-4 max-w-6xl">
  <!-- Increased max-width for filters -->

  <!-- HEADER -->
  <header class="mb-8 border-b border-gray-200 pb-4">
    <h1 class="text-3xl font-light text-gray-800">Available Games</h1>
    <p class="text-gray-500 mt-1">Join game or create a reservation.</p>
  </header>

  <!-- ERROR STATE: 500 SERVER ERROR (Full Page) -->
  <!-- @if (errorStatus() === 500) {
        <div class="flex flex-col items-center justify-center py-20 text-center animate-fade-in">
          <div class="bg-red-50 p-6 rounded-full mb-6">
            <mat-icon class="text-red-500 text-6xl !w-16 !h-16">dns</mat-icon>
          </div>
          <h2 class="text-2xl font-bold text-gray-800 mb-2">Server Error</h2>
          <p class="text-gray-600 max-w-md mb-8">
            Oops! Something went wrong on our end. We are working to fix it.
            Please try again in a few minutes.
          </p>
          <button mat-flat-button color="primary" (click)="loadData()">
            <mat-icon>refresh</mat-icon> RETRY CONNECTION
          </button>
        </div>
      } -->

  <!-- NORMAL STATE -->
  <!-- @else { -->

  <!-- FILTERS TOOLBAR -->
  <!-- Grid: 1 column mobile, 3 columns desktop, plus button -->
  <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 mb-8">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-center">
      <!-- Filter: Game Name -->
      <div class="md:col-span-4">
        <mat-form-field appearance="outline" class="w-full dense-form-field">
          <mat-label>Game Name</mat-label>
          <input matInput placeholder="e.g. Root" />
          <mat-icon matSuffix class="text-gray-400">videogame_asset</mat-icon>
        </mat-form-field>
      </div>

      <!-- Filter: Association -->
      <div class="md:col-span-4">
        <mat-form-field appearance="outline" class="w-full dense-form-field">
          <mat-label>Association</mat-label>
          <input matInput placeholder="e.g. Gilda" />
          <mat-icon matSuffix class="text-gray-400">store</mat-icon>
        </mat-form-field>
      </div>

      <!-- Filter: Status -->
      <div class="md:col-span-3">
        <mat-form-field appearance="outline" class="w-full dense-form-field">
          <mat-label>Status</mat-label>
          <mat-select>
            <mat-option value="">All</mat-option>
            <mat-option value="open">Open</mat-option>
            <mat-option value="closed">Closed</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- Filter Actions -->
      <div class="md:col-span-1 flex justify-end md:justify-center">
        <button mat-icon-button color="primary" aria-label="Apply Filters" class="scale-125">
          <mat-icon>filter_list</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- LOADING -->
  @if (isLoading()) {
  <div class="flex flex-col items-center justify-center py-16">
    <mat-spinner diameter="48"></mat-spinner>
    <p class="mt-4 text-gray-500 text-sm">Updating results...</p>
  </div>
  }

  <!-- GENERIC ERROR (e.g. 400 Bad Request) - Inline -->
  <!-- @if (error() && errorStatus() !== 500) {
  <div class="bg-orange-50 border-l-4 border-orange-500 p-4 mb-6 rounded-r" role="alert">
    <div class="flex">
      <mat-icon class="text-orange-500 mr-2">warning</mat-icon>
      <div>
        <p class="text-orange-800 font-bold">Attention</p>
        <p class="text-orange-700 text-sm">{{ error() }}</p>
      </div>
    </div>
  </div>
  } -->

  <!-- GRID RESULTS -->
  @if (!isLoading()) {
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    @for (item of reservations(); track item.id) {
    <app-reservation [reservation]="item" />
    }

    <!-- EMPTY RESULTS -->
    @if (reservations().length === 0) {
    <div
      class="col-span-full flex flex-col items-center justify-center py-16 border-2 border-dashed border-gray-200 rounded-xl bg-gray-50"
    >
      <mat-icon class="text-gray-300 text-6xl mb-2 !w-16 !h-16">filter_alt_off</mat-icon>
      <p class="text-gray-500 font-medium text-lg">No results match your filters.</p>
      <button mat-button color="primary" class="mt-2">CLEAR FILTERS</button>
    </div>
    }
  </div>
  }
</div>
