<div class="container">
  <header class="page-header">
    <h1>Association Dashboard</h1>
    <p>Manage your reservations, tables, and game library.</p>
  </header>

  <div class="dashboard-grid">
    <section class="dashboard-section">
      <h2>Reservations</h2>
      @if (associationId(); as id) {
        <app-dashboard [associationId]="id"></app-dashboard>
      }
    </section>

    <section class="dashboard-section">
      <div class="section-header">
        <h2>My Tables</h2>
        <button mat-stroked-button color="primary" (click)="addTable()">
          <mat-icon>add</mat-icon> Add Table
        </button>
      </div>
      <mat-card class="content-card">
        <mat-card-content>
          <table mat-table [dataSource]="tables()" class="full-width-table">
            <ng-container matColumnDef="size">
              <th mat-header-cell *matHeaderCellDef>Size</th>
              <td mat-cell *matCellDef="let table">
                <span class="badge">{{ table.size }}</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="capacity">
              <th mat-header-cell *matHeaderCellDef>Capacity</th>
              <td mat-cell *matCellDef="let table">{{ table.capacity }} players</td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let table" class="actions-cell">
                <button mat-icon-button color="warn" (click)="removeTable(table.id)">
                  <mat-icon>delete_outline</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell empty-cell" colspan="3">
                No tables yet. Click "Add Table" to start.
              </td>
            </tr>
          </table>
        </mat-card-content>
      </mat-card>
    </section>

    <section class="dashboard-section">
      <div class="section-header">
        <h2>My Boardgames</h2>
        <div class="header-actions">
          <button
            mat-flat-button
            color="warn"
            (click)="removeSelectedGames()"
            [disabled]="selectedGameIds().length === 0"
          >
            <mat-icon>delete</mat-icon>
            Remove ({{ selectedGameIds().length }})
          </button>

          <button mat-stroked-button color="primary" (click)="addBoardgame()">
            <mat-icon>library_add</mat-icon> Add Games
          </button>
        </div>
      </div>

      <app-boardgame-selection [games]="games()" [(selectedIds)]="selectedGameIds">
      </app-boardgame-selection>
    </section>
  </div>
</div>
